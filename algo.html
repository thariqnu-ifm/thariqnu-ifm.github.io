<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<div><a href="https://github.com/thariqnu-ifm/thariqnu-ifm.github.io/archive/master.zip" download="algo.zip"><button type="button">HTML</button></a><button id="simpan" type="button">Save</button><button id="bawah" type="button">bottom</button></div>
<textarea autocapitalize=none autocomplete=on autofocus cols=150 id=zz placeholder="Start writing here"rows=9 spellcheck=false></textarea>

<script>

var zz=document.getElementById("zz");
function save() { 
localStorage.setItem("a",zz.value);
localStorage.setItem("b",[zz.selectionStart,zz.selectionEnd]);
}
var downContent=zz.value=localStorage.getItem("a")||"";
function autosave(){setTimeout(function(){save(),autosave()},3e4)}
//
zz.onkeydown=function(e){downContent=zz.value,"Enter"!=e.key&&13!=e.which||setTimeout(function(e){var t=e.selectionStart;if(0!=t){for(var n=e.value,i="",l=t-2;0<=l&&"\n"!=n[l];l--)i=n[l]+i;var a=i.substring(0,i.length-i.trimLeft().length),o=i.trimRight().slice(-1);-1<":{([".indexOf(o)&&(a+="\t"),e.value=n.slice(0,t)+a+n.slice(t),e.selectionStart=e.selectionEnd=t+a.length}},.01,this)};var pairs={"(":")","{":"}","[":"]","'":"'",'"':'"'};zz.onkeyup=function(e){var t=zz.value;if(!(t.length<=downContent.length)){var n=zz.selectionStart;if(0!=n){var i=t[n-1],l=pairs[i];l?(zz.value=t.slice(0,n)+l+t.slice(n),zz.selectionStart=zz.selectionEnd=n):" "==i&&1<n&&n<t.length&&pairs[t[n-2]]==t[n]&&(zz.value=t.slice(0,n-1)+t.slice(n),zz.selectionStart=zz.selectionEnd=n),downContent=zz.value}}};
//
function btm() {
	zz.focus();
	zz.selectionStart=zz.selectionEnd=zz.value.length;
}
function postinit() {
  autosave();
  document.getElementById("simpan").onclick=save;
  document.getElementById("bawah").onclick=btm;
  zz.onblur=save;
  var selarr = localStorage.getItem("b");
  if(selarr && selarr.length) {
  	zz.focus();
    zz.selectionStart=selarr[0];
    zz.selectionEnd=selarr[1];
  } else btm();
}
postinit();

</script>
